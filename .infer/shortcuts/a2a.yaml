---
# A2A (Agent-to-Agent) Shortcuts
# Manage A2A agent configuration from within chat
#
# Usage:
# - /a2a - List all configured A2A agents
# - /a2a-add <name> [url] [options] - Add a new A2A agent
# - /a2a-remove <name> - Remove an A2A agent
# - /a2a-enable <name> - Enable an A2A agent
# - /a2a-disable <name> - Disable an A2A agent

shortcuts:
  - name: a2a
    description: "List all configured A2A agents"
    command: infer
    args:
      - a2a
      - list

  - name: a2a-add
    description: "Add a new A2A agent (usage: /a2a-add <name> [url] [--oci IMAGE] [--run] [--model MODEL] [--artifacts-url URL] [--environment KEY=VALUE]...)"
    command: bash
    args:
      - -c
      - |
        if [ $# -lt 1 ]; then
          echo "Usage: /a2a-add <name> [url] [options]"
          echo "Options:"
          echo "  --oci IMAGE               OCI image for auto-start"
          echo "  --run                     Enable auto-start"
          echo "  --model MODEL             Model specification (required with --run)"
          echo "  --artifacts-url URL       Artifacts download URL"
          echo "  --environment KEY=VALUE   Environment variable (repeatable)"
          echo ""
          echo "Examples:"
          echo "  /a2a-add researcher https://api.example.com/a2a --model anthropic/claude-4-5-sonnet"
          echo "  /a2a-add coder --run --oci my-agent:latest --model openai/gpt-4"
          exit 1
        fi

        # Build command dynamically to handle all flags
        CMD="infer a2a add"
        for arg in "$@"; do
          CMD="$CMD \"$arg\""
        done

        eval "$CMD"

  - name: a2a-remove
    description: "Remove an A2A agent (usage: /a2a-remove <name>)"
    command: bash
    args:
      - -c
      - |
        if [ $# -lt 1 ]; then
          echo "Usage: /a2a-remove <name>"
          echo "Example: /a2a-remove researcher"
          exit 1
        fi
        infer a2a remove "$1"

  - name: a2a-enable
    description: "Enable an A2A agent (usage: /a2a-enable <name>)"
    command: bash
    args:
      - -c
      - |
        if [ $# -lt 1 ]; then
          echo "Usage: /a2a-enable <name>"
          echo "Example: /a2a-enable researcher"
          exit 1
        fi
        infer a2a enable "$1"

  - name: a2a-disable
    description: "Disable an A2A agent (usage: /a2a-disable <name>)"
    command: bash
    args:
      - -c
      - |
        if [ $# -lt 1 ]; then
          echo "Usage: /a2a-disable <name>"
          echo "Example: /a2a-disable researcher"
          exit 1
        fi
        infer a2a disable "$1"
