version = 1

[vars]
GOPATH = "$HOME/go"
GOPROXY = "https://proxy.golang.org,direct"
GOSUMDB = "sum.golang.org"
GO111MODULE = "on"
CGO_ENABLED = "1"
NPM_CONFIG_PREFIX = "$FLOX_ENV_PROJECT/.flox/npm"
NODE_PATH = "$FLOX_ENV_PROJECT/.flox/npm/lib/node_modules"

[install]
go.pkg-path = "go"
go.version = "^1.25.4"
nodejs.pkg-path = "nodejs_24"
nodejs.version = "^24.11.1"
git.pkg-path = "git"
git.version = "^2.51.2"
gh.pkg-path = "gh"
gh.version = "^2.83.2"
golangci-lint.pkg-path = "golangci-lint"
golangci-lint.version = "^2.7.2"
pre-commit.pkg-path = "pre-commit"
pre-commit.version = "^4.5.0"
go-task.pkg-path = "go-task"
go-task.version = "^3.45.5"
ripgrep.pkg-path = "ripgrep"
ripgrep.version = "^15.1.0"
markdownlint-cli.pkg-path = "markdownlint-cli"
markdownlint-cli.version = "^0.47.0"
claude-code.pkg-path = "claude-code"
claude-code.version = "^2.1.1"
docker.pkg-path = "docker"
docker.version = "^29.1.2"
docker-compose.pkg-path = "docker-compose"
docker-compose.version = "^5.0.0"

[hook]
on-activate = """
  mkdir -p "$NPM_CONFIG_PREFIX"
  export PATH="$PATH:$NPM_CONFIG_PREFIX/bin:$HOME/go/bin:$HOME/.local/bin"

  if [ ! -d "$NPM_CONFIG_PREFIX/lib/node_modules/semantic-release" ]; then
    echo "Installing semantic-release and plugins..."
    npm install -g \
      semantic-release@24.2.9 \
      @semantic-release/commit-analyzer@13.0.1 \
      @semantic-release/release-notes-generator@14.1.0 \
      @semantic-release/changelog@6.0.3 \
      @semantic-release/git@10.0.1 \
      @semantic-release/github@11.0.6 \
      conventional-changelog-conventionalcommits@9.1.0 \
      conventional-changelog-cli@5.0.0
  fi
"""
